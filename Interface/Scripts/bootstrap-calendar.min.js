"use strict";Date.prototype.getWeek=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil(((this.getTime()-n.getTime())/864e5+n.getDay()+1)/7)};Date.prototype.getMonthFormatted=function(){var n=this.getMonth()+1;return n<10?"0"+n:n};Date.prototype.getDateFormatted=function(){var n=this.getDate();return n<10?"0"+n:n};String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});String.prototype.formatNum||(String.prototype.formatNum=function(n){for(var t=""+this;t.length<n;)t="0"+t;return t}),function(n){function c(n,t){var i,r,u;u=n;i=n.indexOf("?")<0?"?":"&";for(r in t)u+=i+r+"="+encodeURIComponent(t[r]),i="&";return u}function f(t,i){var r=t.options[i]!=null?t.options[i]:null,u=t.locale[i]!=null?t.locale[i]:null,f;return i=="holidays"&&t.options.merge_holidays?(f={},n.extend(!0,f,u?u:e.holidays),r&&n.extend(!0,f,r),f):r!=null?r:u!=null?u:e[i]}function r(t,i){var e=[],o=f(t,"holidays"),s,h;for(s in o)e.push(s+":"+o[s]);return(e.push(i),e=e.join("|"),e in r.cache)?r.cache[e]:(h=[],n.each(o,function(t,r){var e=null,c=null,o=!1,s,f;if(n.each(t.split(">"),function(n,r){var s,h=null,f;if(s=/^(\d\d)-(\d\d)$/.exec(r))h=new Date(i,parseInt(s[2],10)-1,parseInt(s[1],10));else if(s=/^(\d\d)-(\d\d)-(\d\d\d\d)$/.exec(r))parseInt(s[3],10)==i&&(h=new Date(i,parseInt(s[2],10)-1,parseInt(s[1],10)));else if(s=/^easter(([+\-])(\d+))?$/.exec(r))h=l(i,s[1]?parseInt(s[1],10):0);else if(s=/^(\d\d)([+\-])([1-5])\*([0-6])$/.exec(r)){var a=parseInt(s[1],10)-1,p=s[2],v=parseInt(s[3]),y=parseInt(s[4]);switch(p){case"+":for(f=new Date(i,a,-6);f.getDay()!=y;)f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1);h=new Date(f.getFullYear(),f.getMonth(),f.getDate()+7*v);break;case"-":for(f=new Date(i,a+1,7);f.getDay()!=y;)f=new Date(f.getFullYear(),f.getMonth(),f.getDate()-1);h=new Date(f.getFullYear(),f.getMonth(),f.getDate()-7*v)}}if(!h)return u("Unknown holiday: "+t),o=!0,!1;switch(n){case 0:e=h;break;case 1:if(h.getTime()<=e.getTime())return u("Unknown holiday: "+t),o=!0,!1;c=h;break;default:return u("Unknown holiday: "+t),o=!0,!1}}),!o){if(s=[],c)for(f=new Date(e.getTime());f.getTime()<=c.getTime();f.setDate(f.getDate()+1))s.push(new Date(f.getTime()));else s.push(e);h.push({name:r,days:s})}}),r.cache[e]=h,r.cache[e])}function u(t){n.type(window.console)=="object"&&n.type(window.console.warn)=="function"&&window.console.warn("[Bootstrap-Calendar] "+t)}function t(t,i){return this.options=n.extend(!0,{position:{start:new Date,end:new Date}},h,t),this.setLanguage(this.options.language),this.context=i,i.css("width",this.options.width).addClass("cal-context"),this.view(),this}function s(t,i,r,u){t.stopPropagation();var i=n(i),f=i.closest(".cal-cell"),e=f.closest(".cal-before-eventlist"),o=f.data("cal-row");i.fadeOut("fast");r.slideUp("fast",function(){var t=n(".events-list",f);r.html(u.options.templates["events-list"]({cal:u,events:u.getEventsBetween(parseInt(t.data("cal-start")),parseInt(t.data("cal-end")))}));e.after(r);u.activecell=n("[data-cal-date]",f).text();n("#cal-slide-tick").addClass("tick"+o).show();r.slideDown("fast",function(){n("body").one("click",function(){r.slideUp("fast");u.activecell=0})})});setTimeout(function(){n("a.event-item").mouseenter(function(){n('a[data-event-id="'+n(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+n(this).data("event-class"))});n("a.event-item").mouseleave(function(){n("div.cal-cell1").removeClass("day-highlight dh-"+n(this).data("event-class"))});u._update_modal()},400)}function l(n,t){var u=n%19,i=Math.floor(n/100),f=n%100,s=Math.floor(i/4),h=i%4,c=Math.floor((i+8)/25),l=Math.floor((i-c+1)/3),r=(19*u+i-s-l+15)%30,a=Math.floor(f/4),v=f%4,e=(32+2*h+2*a-r-v)%7,y=Math.floor((u+11*r+22*e)/451),o=r+e+7*y+114,p=Math.floor(o/31)-1,w=o%31+1;return new Date(n,p,w+(t?t:0),0,0,0)}var h={width:"100%",view:"month",day:"now",time_start:"06:00",time_end:"22:00",time_split:"30",events_source:"",tmpl_path:"tmpls/",tmpl_cache:!0,classes:{months:{inmonth:"cal-day-inmonth",outmonth:"cal-day-outmonth",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"},week:{workday:"cal-day-workday",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"}},modal:null,modal_type:"iframe",modal_title:null,views:{year:{slide_events:1,enable:1},month:{slide_events:1,enable:1},week:{enable:1},day:{enable:1}},merge_holidays:!1,onAfterEventsLoad:function(){},onBeforeEventsLoad:function(n){n()},onAfterViewLoad:function(){},onAfterModalShown:function(){},onAfterModalHidden:function(){},events:[],templates:{year:"",month:"",week:"",day:""},stop_cycling:!1},e={first_day:2,holidays:{"01-01":"New Year's Day","01+3*1":"Birthday of Dr. Martin Luther King, Jr.","02+3*1":"Washington's Birthday","05-1*1":"Memorial Day","04-07":"Independence Day","09+1*1":"Labor Day","10+2*1":"Columbus Day","11-11":"Veterans Day","11+4*4":"Thanksgiving Day","25-12":"Christmas"}},o={error_noview:"Calendar: View {0} not found",error_dateformat:'Calendar: Wrong date format {0}. Should be either "now" or "yyyy-mm-dd"',error_loadurl:"Calendar: Event URL is not set",error_where:'Calendar: Wrong navigation direction {0}. Can be only "next" or "prev" or "today"',error_timedevide:"Calendar: Time split parameter should divide 60 without decimals. Something like 10, 15, 30",no_events_in_day:"No events in this day.",title_year:"{0}",title_month:"{0} {1}",title_week:"week {0} of {1}",title_day:"{0} {1} {2}, {3}",week:"Week {0}",all_day:"All day",time:"Time",events:"Events",before_time:"Ends before timeline",after_time:"Starts after timeline",m0:"January",m1:"February",m2:"March",m3:"April",m4:"May",m5:"June",m6:"July",m7:"August",m8:"September",m9:"October",m10:"November",m11:"December",ms0:"Jan",ms1:"Feb",ms2:"Mar",ms3:"Apr",ms4:"May",ms5:"Jun",ms6:"Jul",ms7:"Aug",ms8:"Sep",ms9:"Oct",ms10:"Nov",ms11:"Dec",d0:"Sunday",d1:"Monday",d2:"Tuesday",d3:"Wednesday",d4:"Thursday",d5:"Friday",d6:"Saturday"},i="";try{n.type(window.jstz)=="object"&&n.type(jstz.determine)=="function"&&(i=jstz.determine().name(),n.type(i)!=="string"&&(i=""))}catch(a){}r.cache={};t.prototype.setOptions=function(t){n.extend(this.options,t);"language"in t&&this.setLanguage(t.language);"modal"in t&&this._update_modal()};t.prototype.setLanguage=function(t){window.calendar_languages&&t in window.calendar_languages?(this.locale=n.extend(!0,{},o,calendar_languages[t]),this.options.language=t):(this.locale=o,delete this.options.language)};t.prototype._render=function(){var n,t,i;this.context.html("");this._loadTemplate(this.options.view);this.stop_cycling=!1;n={};n.cal=this;n.day=1;n.days_name=f(this,"first_day")==1?[this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6,this.locale.d0]:[this.locale.d0,this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6];t=parseInt(this.options.position.start.getTime());i=parseInt(this.options.position.end.getTime());n.events=this.getEventsBetween(t,i);switch(this.options.view){case"week":this._calculate_hour_minutes(n);break;case"day":this._calculate_hour_minutes(n)}n.start=new Date(this.options.position.start.getTime());n.lang=this.locale;this.context.append(this.options.templates[this.options.view](n));this._update()};t.prototype._calculate_hour_minutes=function(t){var c=this,o=parseInt(this.options.time_split),f=60/o,l=Math.min(f,1),e,s,r;(f>=1&&f%1!=0||f<1&&1440/o%1!=0)&&n.error(this.locale.error_timedevide);e=this.options.time_start.split(":");s=this.options.time_end.split(":");t.hours=(parseInt(s[0])-parseInt(e[0]))*l;var a=t.hours*f-parseInt(e[1])/o,h=6e4*o,i=new Date(this.options.position.start.getTime());i.setHours(e[0]);i.setMinutes(e[1]);r=new Date(this.options.position.end.getTime());r.setHours(s[0]);r.setMinutes(s[1]);t.all_day=[];t.by_hour=[];t.after_time=[];t.before_time=[];n.each(t.events,function(n,f){var e=new Date(parseInt(f.start)),o=new Date(parseInt(f.end)),s,v,l;if(f.start_hour=e.getHours().toString().formatNum(2)+":"+e.getMinutes().toString().formatNum(2),f.end_hour=o.getHours().toString().formatNum(2)+":"+o.getMinutes().toString().formatNum(2),f.start<i.getTime()&&(u(1),f.start_hour=e.getDate()+" "+c.locale["ms"+e.getMonth()]+" "+f.start_hour),f.end>r.getTime()&&(u(1),f.end_hour=o.getDate()+" "+c.locale["ms"+o.getMonth()]+" "+f.end_hour),f.start<i.getTime()&&f.end>r.getTime()){t.all_day.push(f);return}if(f.end<i.getTime()){t.before_time.push(f);return}if(f.start>r.getTime()){t.after_time.push(f);return}s=i.getTime()-f.start;f.top=s>=0?0:Math.abs(s)/h;v=Math.abs(a-f.top);l=(f.end-f.start)/h;s>=0&&(l=(f.end-i.getTime())/h);f.lines=l;l>v&&(f.lines=v);t.by_hour.push(f)})};t.prototype._hour_min=function(n){var r=this.options.time_start.split(":"),t=parseInt(this.options.time_split),i=60/t;return n==0?i-parseInt(r[1])/t:i};t.prototype._hour=function(n,t){var i=this.options.time_start.split(":"),r=parseInt(this.options.time_split),u=""+(parseInt(i[0])+n*Math.max(r/60,1)),f=""+(r*t+(n==0?parseInt(i[1]):0));return u.formatNum(2)+":"+f.formatNum(2)};t.prototype._week=function(){this._loadTemplate("week-days");var t={},i=parseInt(this.options.position.start.getTime()),u=parseInt(this.options.position.end.getTime()),r=[],e=this,o=f(this,"first_day");return n.each(this.getEventsBetween(i,u),function(n,t){t.start_day=new Date(parseInt(t.start)).getDay();o==1&&(t.start_day=(t.start_day+6)%7);t.days=t.end-t.start<=864e5?1:(t.end-t.start)/864e5;t.start<i&&(t.days=t.days-(i-t.start)/864e5,t.start_day=0);t.days=Math.ceil(t.days);t.start_day+t.days>7&&(t.days=7-t.start_day);r.push(t)}),t.events=r,t.cal=this,e.options.templates["week-days"](t)};t.prototype._month=function(n){var t,i,r;return this._loadTemplate("year-month"),t={cal:this},i=n+1,t.data_day=this.options.position.start.getFullYear()+"-"+(i<10?"0"+i:i)+"-01",t.month_name=this.locale["m"+n],r=new Date(this.options.position.start.getFullYear(),n,1,0,0,0),t.start=parseInt(r.getTime()),t.end=parseInt(new Date(this.options.position.start.getFullYear(),n+1,1,0,0,0).getTime()),t.events=this.getEventsBetween(t.start,t.end),this.options.templates["year-month"](t)};t.prototype._day=function(t,i){var e,s,c,h;this._loadTemplate("month-day");var r={tooltip:"",cal:this},u=this.options.classes.months.outmonth,o=this.options.position.start.getDay();return f(this,"first_day")==2?o++:o=o==0?7:o,i=i-o+1,e=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),i,0,0,0),i>0&&(u=this.options.classes.months.inmonth),s=new Date(this.options.position.end.getTime()-1).getDate(),i+1>s&&(this.stop_cycling=!0),i>s&&(i=i-s,u=this.options.classes.months.outmonth),u=n.trim(u+" "+this._getDayClass("months",e)),i<=0&&(c=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),0).getDate(),i=c-Math.abs(i),u+=" cal-month-first-row"),h=this._getHoliday(e),h!==!1&&(r.tooltip=h),r.data_day=e.getFullYear()+"-"+e.getMonthFormatted()+"-"+(i<10?"0"+i:i),r.cls=u,r.day=i,r.start=parseInt(e.getTime()),r.end=parseInt(r.start+864e5),r.events=this.getEventsBetween(r.start,r.end),this.options.templates["month-day"](r)};t.prototype._getHoliday=function(t){var i=!1;return n.each(r(this,t.getFullYear()),function(){var r=!1;return n.each(this.days,function(){if(this.toDateString()==t.toDateString())return r=!0,!1}),r?(i=this.name,!1):void 0}),i};t.prototype._getHolidayName=function(n){var t=this._getHoliday(n);return t===!1?"":t};t.prototype._getDayClass=function(n,t){var u=this,r=function(t,i){var r;r=u.options.classes&&n in u.options.classes&&t in u.options.classes[n]?u.options.classes[n][t]:"";typeof r=="string"&&r.length&&i.push(r)},i=[],f;t.toDateString()==(new Date).toDateString()&&r("today",i);f=this._getHoliday(t);f!==!1&&r("holidays",i);switch(t.getDay()){case 0:r("sunday",i);break;case 6:r("saturday",i)}return r(t.toDateString(),i),i.join(" ")};t.prototype.view=function(n){if(n){if(!this.options.views[n].enable)return;this.options.view=n}this._init_position();this._loadEvents();this._render();this.options.onAfterViewLoad.call(this,this.options.view)};t.prototype.navigate=function(t,i){var r=n.extend({},this.options.position);if(t=="next")switch(this.options.view){case"year":r.start.setFullYear(this.options.position.start.getFullYear()+1);break;case"month":r.start.setMonth(this.options.position.start.getMonth()+1);break;case"week":r.start.setDate(this.options.position.start.getDate()+7);break;case"day":r.start.setDate(this.options.position.start.getDate()+1)}else if(t=="prev")switch(this.options.view){case"year":r.start.setFullYear(this.options.position.start.getFullYear()-1);break;case"month":r.start.setMonth(this.options.position.start.getMonth()-1);break;case"week":r.start.setDate(this.options.position.start.getDate()-7);break;case"day":r.start.setDate(this.options.position.start.getDate()-1)}else t=="today"?r.start.setTime((new Date).getTime()):n.error(this.locale.error_where.format(t));this.options.day=r.start.getFullYear()+"-"+r.start.getMonthFormatted()+"-"+r.start.getDateFormatted();this.view();_.isFunction(i)&&i()};t.prototype._init_position=function(){var t,i,r,e,o,u,s;this.options.day=="now"?(e=new Date,t=e.getFullYear(),i=e.getMonth(),r=e.getDate()):this.options.day.match(/^\d{4}-\d{2}-\d{2}$/g)?(o=this.options.day.split("-"),t=parseInt(o[0],10),i=parseInt(o[1],10)-1,r=parseInt(o[2],10)):n.error(this.locale.error_dateformat.format(this.options.day));switch(this.options.view){case"year":this.options.position.start.setTime(new Date(t,0,1).getTime());this.options.position.end.setTime(new Date(t+1,0,1).getTime());break;case"month":this.options.position.start.setTime(new Date(t,i,1).getTime());this.options.position.end.setTime(new Date(t,i+1,1).getTime());break;case"day":this.options.position.start.setTime(new Date(t,i,r).getTime());this.options.position.end.setTime(new Date(t,i,r+1).getTime());break;case"week":u=new Date(t,i,r);s=f(this,"first_day")==1?u.getDate()-(u.getDay()+6)%7:u.getDate()-u.getDay();this.options.position.start.setTime(new Date(t,i,s).getTime());this.options.position.end.setTime(new Date(t,i,s+7).getTime());break;default:n.error(this.locale.error_noview.format(this.options.view))}return this};t.prototype.getTitle=function(){var n=this.options.position.start;switch(this.options.view){case"year":return this.locale.title_year.format(n.getFullYear());case"month":return this.locale.title_month.format(this.locale["m"+n.getMonth()],n.getFullYear());case"week":return this.locale.title_week.format(n.getWeek(),n.getFullYear());case"day":return this.locale.title_day.format(this.locale["d"+n.getDay()],n.getDate(),this.locale["m"+n.getMonth()],n.getFullYear())}return};t.prototype.isToday=function(){var n=(new Date).getTime();return n>this.options.position.start&&n<this.options.position.end};t.prototype.getStartDate=function(){return this.options.position.start};t.prototype.getEndDate=function(){return this.options.position.end};t.prototype._loadEvents=function(){var t=this,r=null,f;"events_source"in this.options&&this.options.events_source!==""?r=this.options.events_source:"events_url"in this.options&&(r=this.options.events_url,u("The events_url option is DEPRECATED and it will be REMOVED in near future. Please use events_source instead."));switch(n.type(r)){case"function":f=function(){return r(t.options.position.start,t.options.position.end,i)};break;case"array":f=function(){return[].concat(r)};break;case"string":r.length&&(f=function(){var u=[],f={from:t.options.position.start.getTime(),to:t.options.position.end.getTime()};return i.length&&(f.browser_timezone=i),n.ajax({url:c(r,f),dataType:"json",type:"GET",async:!1}).done(function(t){t.success||n.error(t.error);t.result&&(u=t.result)}),u})}f||n.error(this.locale.error_loadurl);this.options.onBeforeEventsLoad.call(this,function(){t.options.events=f();t.options.events.sort(function(n,t){var i;return i=n.start-t.start,i==0&&(i=n.end-t.end),i});t.options.onAfterEventsLoad.call(t,t.options.events)})};t.prototype._templatePath=function(n){return typeof this.options.tmpl_path=="function"?this.options.tmpl_path(n):this.options.tmpl_path+n+".html"};t.prototype._loadTemplate=function(t){if(!this.options.templates[t]){var i=this;n.ajax({url:i._templatePath(t),dataType:"html",type:"GET",async:!1,cache:this.options.tmpl_cache}).done(function(n){i.options.templates[t]=_.template(n)})}};t.prototype._update=function(){var t=this;n('*[data-toggle="tooltip"]').tooltip({container:"body"});n("*[data-cal-date]").click(function(){var i=n(this).data("cal-view");t.options.day=n(this).data("cal-date");t.view(i)});n(".cal-cell").dblclick(function(){var i=n("[data-cal-date]",this).data("cal-view");t.options.day=n("[data-cal-date]",this).data("cal-date");t.view(i)});this["_update_"+this.options.view]();this._update_modal()};t.prototype._update_modal=function(){var t=this,i,r;if((n("a[data-event-id]",this.context).unbind("click"),t.options.modal)&&(i=n(t.options.modal),i.length)){r=null;t.options.modal_type=="iframe"&&(r=n(document.createElement("iframe")).attr({width:"100%",frameborder:"0"}));n("a[data-event-id]",this.context).on("click",function(u){u.preventDefault();u.stopPropagation();var f=n(this).attr("href"),e=n(this).data("event-id"),u=_.find(t.options.events,function(n){return n.id==e});t.options.modal_type=="iframe"&&(r.attr("src",f),n(".modal-body",i).html(r));(!i.data("handled.bootstrap-calendar")||i.data("handled.bootstrap-calendar")&&i.data("handled.event-id")!=u.id)&&i.off("show.bs.modal").off("shown.bs.modal").off("hidden.bs.modal").on("show.bs.modal",function(){var r=n(this).find(".modal-body"),e;switch(t.options.modal_type){case"iframe":e=r.height()-parseInt(r.css("padding-top"),10)-parseInt(r.css("padding-bottom"),10);n(this).find("iframe").height(Math.max(e,50));break;case"ajax":n.ajax({url:f,dataType:"html",async:!1,success:function(n){r.html(n)}});break;case"template":t._loadTemplate("modal");r.html(t.options.templates.modal({event:u,calendar:t}))}_.isFunction(t.options.modal_title)&&i.find("h3").html(t.options.modal_title(u))}).on("shown.bs.modal",function(){t.options.onAfterModalShown.call(t,t.options.events)}).on("hidden.bs.modal",function(){t.options.onAfterModalHidden.call(t,t.options.events)}).data("handled.bootstrap-calendar",!0).data("handled.event-id",u.id);i.modal("show")})}};t.prototype._update_day=function(){n("#cal-day-panel").height(n("#cal-day-panel-hour").height())};t.prototype._update_week=function(){};t.prototype._update_year=function(){this._update_month_year()};t.prototype._update_month=function(){this._update_month_year();var t=this,i=n(document.createElement("div")).attr("id","cal-week-box"),r=this.options.position.start.getFullYear()+"-"+this.options.position.start.getMonthFormatted()+"-";n(".cal-month-box .cal-row-fluid").on("mouseenter",function(){var e=new Date(t.options.position.start),f=n(".cal-cell1:first-child .cal-month-day",this),u=f.hasClass("cal-month-first-row")?1:n("[data-cal-date]",f).text();e.setDate(parseInt(u));u=u<10?"0"+u:u;i.html(t.locale.week.format(e.getWeek()));i.attr("data-cal-week",r+u).show().appendTo(f)}).on("mouseleave",function(){i.hide()});i.click(function(){t.options.day=n(this).data("cal-week");t.view("week")});n("a.event").mouseenter(function(){n('a[data-event-id="'+n(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+n(this).data("event-class"))});n("a.event").mouseleave(function(){n("div.cal-cell1").removeClass("day-highlight dh-"+n(this).data("event-class"))})};t.prototype._update_month_year=function(){var r;if(this.options.views[this.options.view].slide_events){var t=this,i=n(document.createElement("div")).attr("id","cal-day-tick").html('<i class="icon-chevron-down glyphicon glyphicon-chevron-down"><\/i>');n(".cal-month-day, .cal-year-box .span3").on("mouseenter",function(){n(".events-list",this).length!=0&&n(this).children("[data-cal-date]").text()!=t.activecell&&i.show().appendTo(this)}).on("mouseleave",function(){i.hide()}).on("click",function(u){n(".events-list",this).length!=0&&n(this).children("[data-cal-date]").text()!=t.activecell&&s(u,i,r,t)});r=n(document.createElement("div")).attr("id","cal-slide-box");r.hide().click(function(n){n.stopPropagation()});this._loadTemplate("events-list");i.click(function(i){s(i,n(this),r,t)})}};t.prototype.getEventsBetween=function(t,i){var r=[];return n.each(this.options.events,function(){if(this.start==null)return!0;var n=this.end||this.start;parseInt(this.start)<i&&parseInt(n)>=t&&r.push(this)}),r};n.fn.calendar=function(n){return new t(n,this)}}(jQuery);
//# sourceMappingURL=bootstrap-calendar.min.js.map
